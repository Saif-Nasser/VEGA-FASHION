<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Manage Products | VEGA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        .admin-page {
            padding-top: 100px;
            min-height: 100vh;
            background: linear-gradient(135deg, #F5F5DC 0%, #FAF9F6 100%);
        }

        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px;
        }

        .admin-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .admin-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .admin-header h1 {
            font-size: 36px;
            color: var(--black);
            margin-bottom: 10px;
            font-weight: 300;
        }

        .admin-header p {
            color: var(--dark-gray);
            font-size: 16px;
        }

        .admin-nav {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
            flex-wrap: wrap;
        }

        .admin-nav-btn {
            padding: 12px 24px;
            background: none;
            border: 2px solid #eee;
            border-radius: 10px;
            color: var(--dark-gray);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .admin-nav-btn.active {
            background: var(--black);
            color: white;
            border-color: var(--black);
        }

        .admin-nav-btn:hover:not(.active) {
            border-color: var(--black);
            color: var(--black);
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-gray);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #eee;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
            background: var(--light-beige);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--black);
            background: white;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .admin-card input[type="checkbox"],
        #editProductModal input[type="checkbox"],
        .form-group label input[type="checkbox"] {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 6px;
            border: 2px solid #e6e6e6;
            background: linear-gradient(180deg, #ffffff, #f6f6f6);
            display: inline-block;
            position: relative;
            cursor: pointer;
            transition: all 0.18s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.06), inset 0 -2px 3px rgba(0, 0, 0, 0.02);
            vertical-align: middle;
        }

        .admin-card input[type="checkbox"]:hover,
        #editProductModal input[type="checkbox"]:hover,
        .form-group label input[type="checkbox"]:hover {
            transform: translateY(-1px);
            border-color: #cfcfcf;
        }

        .admin-card input[type="checkbox"]:focus,
        #editProductModal input[type="checkbox"]:focus {
            outline: none;
            box-shadow: 0 0 0 4px rgba(123, 97, 255, 0.12);
        }

        .admin-card input[type="checkbox"]::after,
        #editProductModal input[type="checkbox"]::after,
        .form-group label input[type="checkbox"]::after {
            content: "";
            position: absolute;
            top: 3px;
            left: 6px;
            width: 6px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg) scale(0);
            transform-origin: center;
            transition: transform 0.12s ease;
        }

        .admin-card input[type="checkbox"]:checked,
        #editProductModal input[type="checkbox"]:checked,
        .form-group label input[type="checkbox"]:checked {
            background: linear-gradient(135deg, #7b61ff, #2bc3ff);
            border-color: transparent;
        }

        .admin-card input[type="checkbox"]:checked::after,
        #editProductModal input[type="checkbox"]:checked::after,
        .form-group label input[type="checkbox"]:checked::after {
            transform: rotate(45deg) scale(1);
        }

        .product-item .product-checkbox {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
            cursor: pointer;
            text-decoration: none;
            -webkit-tap-highlight-color: transparent;
        }

        .product-checkbox .checkmark {
            position: relative;
            width: 22px;
            height: 22px;
            border-radius: 6px;
            border: 2px solid #e6e6e6;
            background: linear-gradient(180deg, #ffffff, #f6f6f6);
            display: inline-block;
            flex: 0 0 auto;
            transition: all 0.18s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.06), inset 0 -2px 3px rgba(0, 0, 0, 0.02);
        }

        .product-checkbox input {
            position: absolute;
            opacity: 0;
            width: 18px;
            height: 18px;
        }

        .product-checkbox .checkmark::after {
            content: "";
            position: absolute;
            top: 3px;
            left: 6px;
            width: 6px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg) scale(0);
            transform-origin: center;
            transition: transform 0.12s ease;
        }

        .product-checkbox:hover .checkmark {
            transform: translateY(-1px);
            border-color: #cfcfcf;
        }

        .product-checkbox input:focus+.checkmark {
            box-shadow: 0 0 0 4px rgba(123, 97, 255, 0.12);
            outline: none;
        }

        .product-checkbox input:checked+.checkmark {
            background: linear-gradient(135deg, #7b61ff, #2bc3ff);
            border-color: transparent;
        }

        .product-checkbox input:checked+.checkmark::after {
            transform: rotate(45deg) scale(1);
        }

        .checkbox-group label {
            margin: 0;
            font-weight: 500;
            color: var(--dark-gray);
            cursor: pointer;
        }

        .size-label {
            display: inline-flex;
            align-items: center;
            position: relative;
        }

        .size-label input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            width: 1px;
            height: 1px;
            pointer-events: none;
        }

        .size-visual {
            padding: 8px 12px;
            border-radius: 999px;
            border: 1px solid #e9e9e9;
            background: #fff;
            color: var(--dark-gray);
            font-weight: 600;
            transition: all 0.18s ease;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.04);
            user-select: none;
        }

        .size-label input[type="checkbox"]:checked+.size-visual {
            background: linear-gradient(135deg, #7b61ff, #2bc3ff);
            color: white;
            transform: translateY(-2px);
            border-color: transparent;
        }

        .size-label input[type="checkbox"]:focus+.size-visual {
            box-shadow: 0 0 0 4px rgba(123, 97, 255, 0.12);
        }

        .submit-btn {
            width: 100%;
            padding: 16px;
            background: var(--black);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .submit-btn:hover {
            background: #8B7355;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .message {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-weight: 600;
            display: none;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .products-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 30px;
        }

        .product-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 10px;
            margin-bottom: 15px;
            background: var(--light-beige);
        }

        .product-item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            margin-right: 20px;
        }

        .product-info {
            flex: 1;
        }

        .product-info h3 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }

        .product-info p {
            margin: 0;
            color: var(--dark-gray);
            font-size: 14px;
        }

        .product-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 8px 12px;
            background: none;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-btn:hover {
            background: var(--black);
            color: white;
            border-color: var(--black);
        }

        .action-btn.delete {
            color: #e74c3c;
            border-color: #e74c3c;
        }

        .action-btn.delete:hover {
            background: #e74c3c;
            color: white;
        }

        .orders-list {
            margin-top: 20px;
        }

        .order-item {
            background: var(--light-beige);
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }

        .order-id {
            font-weight: 600;
            color: var(--black);
            font-size: 16px;
        }

        .order-date {
            color: var(--dark-gray);
            font-size: 14px;
        }

        .order-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-confirmed {
            background: #cce5ff;
            color: #004085;
        }

        .status-shipped {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-delivered {
            background: #d4edda;
            color: #155724;
        }

        .order-details {
            margin-bottom: 15px;
        }

        .order-item-row {
            display: flex;
            margin-bottom: 8px;
        }

        .order-label {
            width: 120px;
            font-weight: 600;
            color: var(--dark-gray);
        }

        .order-value {
            flex: 1;
        }

        .order-items {
            margin: 15px 0;
        }

        .order-item-product {
            display: flex;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .order-item-product img {
            width: 50px;
            height: 50px;
            border-radius: 5px;
            margin-right: 15px;
        }

        .order-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .analytics-card {
            background: var(--light-beige);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid var(--black);
        }

        .analytics-card h3 {
            font-size: 28px;
            color: var(--black);
            margin: 10px 0;
        }

        .analytics-card p {
            color: var(--dark-gray);
            font-size: 14px;
        }

        .back-btn {
            padding: 10px 20px;
            background: #333;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .back-btn:hover {
            background: #555;
            transform: translateY(-2px);
            color: white;
        }

        @media (max-width: 768px) {
            .admin-container {
                padding: 20px;
            }

            .admin-card {
                padding: 25px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .admin-nav {
                flex-direction: column;
            }

            .admin-nav-btn {
                width: 100%;
                justify-content: center;
            }

            .logout-btn {
                position: static;
                width: 100%;
                margin-top: 20px;
            }

            .product-item {
                flex-direction: column;
                text-align: center;
            }

            .product-item img {
                margin-right: 0;
                margin-bottom: 15px;
            }

            .product-actions {
                margin-top: 15px;
            }
        }

        .test-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .test-btn {
            padding: 12px 20px;
            background: var(--black);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .test-btn:hover {
            background: #8B7355;
            transform: translateY(-2px);
        }

        .test-result {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }

        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 20000;
            padding: 20px;
        }

        .modal-backdrop.active {
            display: flex;
        }

        .order-modal {
            width: 100%;
            max-width: 900px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            max-height: 90vh;
            overflow-y: auto;
            padding: 20px 24px;
            animation: slideIn 0.25s ease-out;
        }

        .order-modal .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .order-modal .modal-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--black);
        }

        .order-modal .close-modal {
            background: transparent;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: var(--dark-gray);
        }

        .order-modal .modal-body {
            margin-top: 8px;
        }

        .order-modal .order-item-row {
            margin-bottom: 12px;
        }
    </style>
</head>

<body class="admin-page">

    <header class="top-nav">
        <div class="container nav-container">
            <a href="index.html" class="logo">VEGA</a>
            <div class="nav-icons">
                <div class="cart-icon" style="position: relative;" id="cartIcon">
                    <i class="fas fa-shopping-bag"></i>
                    <span class="cart-count">0</span>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="admin-container">
            <div class="admin-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <div>
                        <h1 style="margin: 0; font-size: 36px; color: var(--black); font-weight: 300;">Admin Dashboard
                        </h1>
                        <p style="margin: 10px 0 0 0; color: var(--dark-gray); font-size: 16px;">Manage products,
                            orders, and view analytics</p>
                    </div>
                    <a href="index.html" class="back-btn" style="margin-left: auto;">
                        <i class="fas fa-arrow-left"></i> Back to Site
                    </a>
                </div>

                <div class="admin-nav">
                    <button class="admin-nav-btn active" data-section="add">
                        <i class="fas fa-plus-circle"></i> Add Product
                    </button>
                    <button class="admin-nav-btn" data-section="view">
                        <i class="fas fa-eye"></i> View Products
                    </button>
                    <button class="admin-nav-btn" data-section="collections">
                        <i class="fas fa-layer-group"></i> Collections
                    </button>
                    <button class="admin-nav-btn" data-section="categories">
                        <i class="fas fa-tags"></i> Categories
                    </button>
                    <button class="admin-nav-btn" data-section="orders">
                        <i class="fas fa-shopping-cart"></i> Orders
                    </button>
                    <button class="admin-nav-btn" data-section="analytics">
                        <i class="fas fa-chart-line"></i> Analytics
                    </button>
                    <button class="admin-nav-btn" data-section="admins">
                        <i class="fas fa-lock"></i> Admin Settings
                    </button>
                    <button class="admin-nav-btn" data-section="promos">
                        <i class="fas fa-percentage"></i> Promo Codes
                    </button>

                    <button class="admin-nav-btn" data-section="test">
                        <i class="fas fa-vial"></i> Test System
                    </button>
                    <button class="admin-nav-btn" data-section="support">
                        <i class="fas fa-headset"></i> Support Messages
                    </button>
                    <button class="admin-nav-btn" data-section="reviews">
                        <i class="fas fa-star"></i> Manage Reviews
                    </button>
                </div>

                <div id="addSection" class="admin-section active">
                    <h2 style="margin-bottom: 30px; color: var(--black);">Add New Product</h2>

                    <form id="addProductForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productName">Product Name</label>
                                <input type="text" id="productName" placeholder="e.g., Silk Evening Dress" required>
                            </div>
                            <div class="form-group">
                                <label for="productCategory">Category</label>
                                <select id="productCategory" required>
                                    <option value="">Loading categories...</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="productPrice">Price (EGP)</label>
                                <input type="number" id="productPrice" placeholder="0.00" step="0.01" min="0" required>
                            </div>
                            <div class="form-group">
                                <label for="productStock">Stock Quantity</label>
                                <input type="number" id="productStock" placeholder="0" min="0" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="productImage">Image URL</label>
                                <input type="url" id="productImage" placeholder="https://example.com/image.jpg"
                                    required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="productDescription">Description</label>
                            <textarea id="productDescription" rows="3" placeholder="Product description..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>Available Sizes</label>
                            <div
                                style="display: flex; flex-wrap: wrap; gap: 12px; padding: 15px; background: #f9f9f9; border-radius: 8px;">
                                <label class="size-label"
                                    style="display: inline-flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="checkbox" name="sizes" value="S">
                                    <span class="size-visual">S</span>
                                </label>
                                <label class="size-label"
                                    style="display: inline-flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="checkbox" name="sizes" value="M">
                                    <span class="size-visual">M</span>
                                </label>
                                <label class="size-label"
                                    style="display: inline-flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="checkbox" name="sizes" value="L">
                                    <span class="size-visual">L</span>
                                </label>
                            </div>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="isNewProduct">
                            <label for="isNewProduct">Mark as New Arrival</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="isTopSelling">
                            <label for="isTopSelling">Mark as Top Selling</label>
                        </div>

                        <div class="message" id="addMessage"></div>

                        <button type="submit" class="submit-btn" id="addProductBtn">
                            <i class="fas fa-plus-circle"></i> Add Product
                        </button>
                    </form>
                </div>

                <div id="viewSection" class="admin-section">
                    <h2 style="margin-bottom: 30px; color: var(--black);">All Products</h2>

                    <div style="margin-bottom: 20px; display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                        <input type="text" id="productSearch" placeholder="Search products..."
                            style="padding: 10px; border: 1px solid #ddd; border-radius: 8px; flex: 1; min-width: 200px;">
                        <label
                            style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">
                            <input type="checkbox" id="lowStockFilter" style="width: 18px; height: 18px;">
                            Low Stock Only
                        </label>
                        <button class="submit-btn" onclick="loadProducts()" style="max-width: 150px; margin: 0;">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>

                    <div class="message" id="viewMessage"></div>

                    <div class="products-list" id="productsList">

                        <p style="text-align: center; color: var(--dark-gray);">Loading products...</p>
                    </div>
                </div>

                <div id="collectionsSection" class="admin-section">
                    <h2 style="margin-bottom: 20px; color: var(--black);">Manage Collections</h2>

                    <form id="createCollectionForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="collectionName">Collection Name</label>
                                <input type="text" id="collectionName" placeholder="e.g., Summer Vibes" required>
                            </div>
                            <div class="form-group">
                                <label for="collectionImage">Cover Image URL (optional)</label>
                                <input type="url" id="collectionImage" placeholder="https://example.com/cover.jpg">
                            </div>
                        </div>

                        <div style="margin-top: 12px; margin-bottom: 8px; font-weight: 600;">Select Products to include
                        </div>
                        <div class="products-list" id="collectionProductsList">
                            <p style="text-align: center; color: var(--dark-gray);">Loading products...</p>
                        </div>

                        <div class="message" id="collectionMessage"></div>

                        <button type="submit" class="submit-btn" id="createCollectionBtn">
                            <i class="fas fa-plus-circle"></i> Create Collection
                        </button>
                    </form>

                    <hr style="margin: 24px 0;" />

                    <h3 style="margin-bottom: 12px; color: var(--black);">Existing Collections</h3>
                    <div id="collectionsList">
                        <p style="text-align: center; color: var(--dark-gray);">Loading collections...</p>
                    </div>
                </div>

                <div id="categoriesSection" class="admin-section">
                    <h2 style="margin-bottom: 20px; color: var(--black);">Manage Categories</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                        <div
                            style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee;">
                            <h3 style="margin-top: 0; margin-bottom: 20px; color: var(--black); font-size: 18px;">Add
                                New Category</h3>
                            <form id="addCategoryForm">
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label
                                        style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px;">Category
                                        Name</label>
                                    <input type="text" id="newCategoryName" placeholder="e.g., Accessories" required
                                        style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                                </div>
                                <div id="categoryMessage" style="display: none; margin-bottom: 15px; font-size: 14px;">
                                </div>
                                <button type="submit" class="btn"
                                    style="width: 100%; background: var(--black); color: white; padding: 12px; border-radius: 8px; font-weight: 600;">
                                    <i class="fas fa-plus"></i> Add Category
                                </button>
                            </form>
                        </div>
                        <div
                            style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee;">
                            <h3 style="margin-top: 0; margin-bottom: 20px; color: var(--black); font-size: 18px;">
                                Existing Categories</h3>
                            <div id="categoriesList">
                                <p style="text-align: center; color: var(--dark-gray); padding: 20px;">Loading
                                    categories...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="ordersSection" class="admin-section">
                    <h2 style="margin-bottom: 30px; color: var(--black);">Manage Orders</h2>

                    <div
                        style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee; margin-bottom: 30px; display: flex; gap: 20px; align-items: center; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 250px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px;">Search
                                Orders</label>
                            <input type="text" id="orderSearch" placeholder="Search by name, email, or order ID..."
                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                        </div>
                        <div style="width: 200px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px;">Filter
                                by Status</label>
                            <select id="orderStatusFilter"
                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                                <option value="">All Statuses</option>
                                <option value="Pending">Pending</option>
                                <option value="Processing">Processing</option>
                                <option value="Shipped">Shipped</option>
                                <option value="Delivered">Delivered</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </div>
                    </div>

                    <div class="orders-list" id="ordersList">
                        <p style="text-align: center; color: var(--dark-gray);">Loading orders...</p>
                    </div>
                </div>

                <div id="analyticsSection" class="admin-section">
                    <h2 style="margin-bottom: 30px; color: var(--black);">Store Analytics</h2>

                    <div class="analytics-grid">
                        <div class="analytics-card">
                            <i class="fas fa-shopping-bag" style="font-size: 24px; color: #8B7355;"></i>
                            <h3 id="totalProducts">0</h3>
                            <p>Total Products</p>
                        </div>

                        <div class="analytics-card">
                            <i class="fas fa-shopping-cart" style="font-size: 24px; color: #8B7355;"></i>
                            <h3 id="totalOrdersCount">0</h3>
                            <p>Total Orders</p>
                        </div>

                        <div class="analytics-card">
                            <i class="fas fa-dollar-sign" style="font-size: 24px; color: #8B7355;"></i>
                            <h3 id="totalRevenue">$0</h3>
                            <p>Total Revenue</p>
                        </div>

                        <div class="analytics-card">
                            <i class="fas fa-users" style="font-size: 24px; color: #8B7355;"></i>
                            <h3 id="pendingOrders">0</h3>
                            <p>Pending Orders</p>
                        </div>

                        <div class="analytics-card"
                            style="border: 1px solid #ff6b6b; background: rgba(255,107,107,0.05);">
                            <i class="fas fa-exclamation-triangle" style="font-size: 24px; color: #ff6b6b;"></i>
                            <h3 id="lowStockCount">0</h3>
                            <p>Low Stock Items</p>
                        </div>
                    </div>

                    <div class="analytics-charts"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 40px;">
                        <div
                            style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">
                            <h3 style="margin-top: 0; margin-bottom: 20px; font-size: 18px;">Revenue Over Time</h3>
                            <canvas id="revenueChart"></canvas>
                        </div>
                        <div
                            style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">
                            <h3 style="margin-top: 0; margin-bottom: 20px; font-size: 18px;">Orders by Category</h3>
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>

                    <div style="margin-top: 40px;">
                        <h3 style="margin-bottom: 20px; color: var(--black);">Recent Activity</h3>
                        <div class="orders-list" id="recentActivity">
                            <p style="text-align: center; color: var(--dark-gray);">Loading recent activity...</p>
                        </div>
                    </div>
                </div>

                <div id="adminsSection" class="admin-section">
                    <h2 style="margin-bottom: 30px; color: var(--black);">Admin settings</h2>

                    <div class="admin-settings-container"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                        <div class="add-admin-card"
                            style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee;">
                            <h3 style="margin-top: 0; margin-bottom: 20px; color: var(--black); font-size: 18px;">Add
                                New Administrator</h3>
                            <form id="addAdminForm">
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label
                                        style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px;">Email
                                        Address</label>
                                    <input type="email" id="adminEmail" placeholder="admin@example.com" required
                                        style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                                </div>
                                <div class="form-group" style="margin-bottom: 20px;">
                                    <label
                                        style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px;">Password</label>
                                    <input type="password" id="adminPassword" placeholder="••••••••" required
                                        style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                                </div>
                                <div id="adminMessage" style="display: none; margin-bottom: 15px; font-size: 14px;">
                                </div>
                                <button type="submit" class="btn"
                                    style="width: 100%; background: var(--black); color: white; padding: 12px; border-radius: 8px; font-weight: 600;">
                                    <i class="fas fa-user-plus"></i> Create Admin Account
                                </button>
                            </form>
                        </div>

                        <div class="active-admins-card"
                            style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee;">
                            <h3 style="margin-top: 0; margin-bottom: 20px; color: var(--black); font-size: 18px;">Active
                                Administrators</h3>
                            <div id="adminsList">
                                <p style="text-align: center; color: var(--dark-gray); padding: 20px;">Loading admins...
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="promosSection" class="admin-section">
                    <h2 style="margin-bottom: 30px; color: var(--black);">Dynamic Promo Codes</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                        <div
                            style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee;">
                            <h3 style="margin-top: 0; margin-bottom: 20px; color: var(--black); font-size: 18px;">Create
                                New Promo Code</h3>
                            <form id="addPromoForm">
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label
                                        style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px;">Code</label>
                                    <input type="text" id="promoCode" placeholder="VEGA20" required
                                        style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; text-transform: uppercase;">
                                </div>
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label
                                        style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px;">Discount
                                        Type</label>
                                    <select id="promoType" required
                                        style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                                        <option value="percentage">Percentage (%)</option>
                                        <option value="fixed">Fixed Amount (EGP)</option>
                                    </select>
                                </div>
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label
                                        style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px;">Discount
                                        Value</label>
                                    <input type="number" id="promoValue" placeholder="20" required
                                        style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                                </div>
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label
                                        style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px;">Expiry
                                        Date</label>
                                    <input type="date" id="promoExpiry" required
                                        style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                                </div>
                                <div id="promoMessage" style="display: none; margin-bottom: 15px; font-size: 14px;">
                                </div>
                                <button type="submit" class="btn" id="createPromoBtn"
                                    style="width: 100%; background: var(--black); color: white; padding: 12px; border-radius: 8px; font-weight: 600;">
                                    <i class="fas fa-plus"></i> Create Promo Code
                                </button>
                            </form>
                        </div>
                        <div
                            style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee;">
                            <h3 style="margin-top: 0; margin-bottom: 20px; color: var(--black); font-size: 18px;">Active
                                Promo Codes</h3>
                            <div id="promosList">
                                <p style="text-align: center; color: var(--dark-gray); padding: 20px;">Loading promo
                                    codes...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hero banners section removed by request --> 

                <div id="testSection" class="admin-section">
                    <h2 style="margin-bottom: 30px; color: var(--black);">System Test</h2>

                    <div class="test-buttons">
                        <button onclick="testLocalStorage()" class="test-btn">
                            Test Local Storage
                        </button>
                        <button onclick="testProductArray()" class="test-btn">
                            Test Product Array
                        </button>
                        <button onclick="testOrdersArray()" class="test-btn">
                            Test Orders Array
                        </button>
                        <button onclick="clearAllData()" class="test-btn" style="background: #e74c3c;">
                            Clear All Data
                        </button>
                    </div>

                    <div class="message" id="testMessage"></div>

                    <div class="form-group">
                        <h3>Current Data</h3>
                        <div class="test-result" id="currentData">
                            Loading data...
                        </div>
                    </div>
                </div>

                <div id="supportSection" class="admin-section">
                    <h2 style="margin-bottom: 30px; color: var(--black);">Customer Support Messages</h2>

                    <div class="support-filters"
                        style="margin-bottom: 30px; display: flex; gap: 15px; flex-wrap: wrap;">
                        <input type="text" id="supportSearch" placeholder="Search messages..."
                            style="padding: 10px 15px; border: 1px solid #ddd; border-radius: 8px; flex: 1; min-width: 200px;">
                        <select id="supportFilter"
                            style="padding: 10px 15px; border: 1px solid #ddd; border-radius: 8px;">
                            <option value="">All Status</option>
                            <option value="new">New</option>
                            <option value="read">Read</option>
                            <option value="replied">Replied</option>
                        </select>
                    </div>

                    <div class="support-messages" id="supportMessagesList" style="display: grid; gap: 15px;">
                        <p style="color: var(--dark-gray); text-align: center; padding: 40px;">No messages yet</p>
                    </div>

                    <div id="supportMessageModal" class="modal"
                        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; justify-content: center; align-items: center;">
                        <div
                            style="background: white; border-radius: 15px; padding: 30px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="margin: 0; color: var(--black);">Message Details</h3>
                                <button onclick="closeSupportModal()"
                                    style="background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">&times;</button>
                            </div>
                            <div id="supportMessageDetail" style="margin-bottom: 20px;">

                            </div>
                            <div style="display: flex; gap: 10px;">
                                <button onclick="markAsRead()" class="btn"
                                    style="flex: 1; background: var(--black); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer;">Mark
                                    as Read</button>
                                <button onclick="deleteMessage()" class="btn"
                                    style="flex: 1; background: #e74c3c; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer;">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="reviewsSection" class="admin-section">
                    <h2 style="margin-bottom: 30px; color: var(--black);">Reviews Moderation</h2>
                    <div
                        style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee;">
                        <h3 style="margin-top: 0; margin-bottom: 20px; color: var(--black); font-size: 18px;">Pending
                            Reviews</h3>
                        <div id="pendingReviewsList" style="display: grid; gap: 20px;">
                            <p style="text-align: center; color: var(--dark-gray); padding: 20px;">Loading reviews...
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="modal-backdrop" id="orderModalBackdrop">
        <div class="order-modal" role="dialog" aria-modal="true" aria-labelledby="orderModalTitle">
            <div class="modal-header">
                <div class="modal-title" id="orderModalTitle">Order Details</div>
                <button class="close-modal" id="closeOrderModal" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body" id="orderModalBody">

                <p style="color: var(--dark-gray);">Loading...</p>
            </div>
        </div>
    </div>

    <div class="cart-modal" id="cartModal">
        <div class="cart-header">
            <h3>Your Shopping Bag</h3>
            <button class="close-cart" id="closeCart">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="cart-items" id="cartItems">

        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span class="total-price">$0.00</span>
            </div>
            <a href="checkout.html" class="btn checkout-btn">Checkout</a>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js" defer></script>
    <script src="firebase-config.js" defer></script>
    <script src="script.js" defer></script>
    <script src="auth.js" defer></script>
    <script src="admin.js" defer></script>

    <script>

        // Secure admin access check using Firebase Auth and admin UID list   
        function checkAdminAccess() {
            firebase.auth().onAuthStateChanged(async (user) => {
                if (!user) {
                    if (typeof showToast === 'function') { showToast('Access denied. Please login as admin.','error'); setTimeout(() => window.location.href = 'login.html', 700); } else { showTempMessage && showTempMessage('Access denied. Please login as admin.'); setTimeout(() => window.location.href = 'login.html', 700); }
                    return;
                }

                try {
                    const isAdmin = await isUserAdminByUid(user.uid);
                    if (!isAdmin) {
                        if (typeof showToast === 'function') { showToast('Access denied. Please login as admin.','error'); setTimeout(() => window.location.href = 'login.html', 700); } else { showTempMessage && showTempMessage('Access denied. Please login as admin.'); setTimeout(() => window.location.href = 'login.html', 700); }
                        return;
                    }

                    // User is authenticated and an admin — initialize the admin page
                    initAdminPage();
                } catch (err) {
                    console.error('Error verifying admin status:', err);
                    if (typeof showToast === 'function') { showToast('Could not verify admin status. Please try again later.','error'); setTimeout(() => window.location.href = 'login.html', 900); } else { showTempMessage && showTempMessage('Could not verify admin status. Please try again later.'); setTimeout(() => window.location.href = 'login.html', 900); }
                }
            });
        }

        window.addEventListener('load', checkAdminAccess);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>

</html>